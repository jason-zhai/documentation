define("confluence-analytics-support",["jquery"],function(e){AJS.Confluence.Analytics=AJS.Confluence.Analytics||{};var f=/([^\?]+)[\?]?([^#]*)[#]?(.*)/;var b=["source","urlPath","queryParams","anchor"];var h;function i(m){var l={};var o=f.exec(m);if(o){for(var n=0;n<b.length;n++){l[b[n]]=o[n]}l.queryParams=c(l.queryParams)}return l}function j(l){if(e.isEmptyObject(l)){return""}else{return(!l.urlPath?"":l.urlPath)+(e.isEmptyObject(l.queryParams)?"":"?"+k(l.queryParams))+(!l.anchor?"":"#"+l.anchor)}}function c(p){var o={};if(p){var n=p.split("&");for(var m=0;m<n.length;m++){var l=n[m].split("=");if(!o[l[0]]){o[l[0]]=[]}o[l[0]].push(n[m].substring(l[0].length+1))}}return o}function k(m){var o="";for(var n in m){for(var l=0;l<m[n].length;l++){o+="&"+n;if(m[n][l]){o+="="+m[n][l]}}}return o.substring(1)}function a(m,n){var l=i(m);if(!e.isEmptyObject(l)){l.queryParams.src=[n]}return j(l)}function g(){if("undefined"===typeof h){var l=e._data(window,"events");h=l&&l.analytics&&l.analytics.length>0}return h}function d(){var l=AJS.Confluence.Analytics.srcRemovedUrl(document.URL);if(document.URL!==l){window.history.replaceState(null,"",l)}}AJS.Confluence.Analytics.setAnalyticsSource=function(l,m){if(g()){l.attr("href",function(o,n){return a(n,encodeURIComponent(m))})}};AJS.Confluence.Analytics.srcRemovedUrl=function(m){var l=i(m);delete l.queryParams.src;return j(l)};AJS.Confluence.Analytics.srcParamValues=function(l){var m=i(l).queryParams;return m&&m.src?m.src:[]};AJS.Confluence.Analytics.publish=function(l,m){AJS.trigger("analytics",{name:l,data:m||{}})};AJS.toInit(function(n){var l=AJS.Confluence.Analytics.srcParamValues(document.URL);for(var m=0;m<l.length;m++){AJS.Confluence.Analytics.publish("confluence.viewpage.src."+l[m])}if(window.history&&window.history.replaceState){d()}});return AJS.Confluence.Analytics});require("confluence-analytics-support");