<!DOCTYPE html>
<html>
   <head>
      <script>
         (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
         (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
         m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
         })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

         ga('create', 'UA-60223453-1', 'auto');
         ga('send', 'pageview');

      </script>
      ## hassplisSpaceSideBar() indicates whether or not the theme supports rendering of the sidebar, not whether or not the
      ## sidebar is present on the current page. Sidebar is only present when there is a valid spaceKey
      #set($useNewSpaceIA = $theme.hasSpaceSideBar() && $spaceKey)
      #if ($sitemeshPage.getProperty("page.spacename"))
      #if ($sitemeshPage.getProperty("page.spacename").indexOf(".") > 0 )
      #set($index = $sitemeshPage.getProperty("page.spacename").indexOf(".")+1)
      <title>$title - $sitemeshPage.getProperty("page.spacename").substring($index) - #siteTitle()</title>
      #else
      <title>$title - $sitemeshPage.getProperty("page.spacename") - #siteTitle()</title>
      #end
      #else
      <title>$title - #siteTitle()</title>
      #end
      #requireResource("confluence.web.resources:print-styles")
      #requireResourcesForContext("main")
      #requireResourcesForContext("atl.general")
      #if ($useNewSpaceIA)
      #requireResource("com.atlassian.confluence.plugins.confluence-space-ia:spacesidebar")
      #end
      #parse("/decorators/includes/header.vm")

      $!settingsManager.globalSettings.customHtmlSettings.beforeHeadEnd
      $!sitemeshPage.getProperty("page.canonical")
      <link href="https://fonts.googleapis.com/css?family=Lato:100,300,400,700,400italic,700italic" rel="stylesheet" type="text/css">
 <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<link rel="stylesheet" href="//code.jquery.com/ui/1.11.2/themes/smoothness/jquery-ui.css">
      <script src="//code.jquery.com/ui/1.11.2/jquery-ui.js"></script>
   </head>
   ## HTML HEADER ENDS
   ## HTML BODY BEGINS
   <body style="padding-top:2px !important;"#onLoadAttr() id="com-atlassian-confluence" class="#if ($darkFeatures.isFeatureEnabled("lighter-editor-v1")) lighter-editor #end $!theme.bodyClass $!sitemeshPage.getProperty("page.bodyClass") aui-layout aui-theme-default mobile-side-menu-open">
   #parse ("/decorators/includes/main-content-includes.vm")
   <ul id="assistive-skip-links" class="assistive">
      <li><a href="#title-heading">$action.getText("assistive.skiplink.to.content")</a></li>
      <li><a href="\#breadcrumbs">$action.getText("assistive.skiplink.to.breadcrumbs")</a></li>
      <li><a href="#header-menu-bar">$action.getText("assistive.skiplink.to.header.menu")</a></li>
      <li><a href="#navigation">$action.getText("assistive.skiplink.to.action.menu")</a></li>
      <li><a href="#quick-search-query">$action.getText("assistive.skiplink.to.quick.search")</a></li>
   </ul>
   <div id="page">
      #if((!$req.requestURL.toString().endsWith('editpage.actions')) && (!$req.requestURL.toString().endsWith('createpage.actions'))&& (!$req.requestURL.toString().endsWith('createpage-entervariables.action')))
      <!-- \#CliQr Global Side-Bar -->
      #end
      <div id="full-height-container">
         <div id="header-precursor">
            <div class="cell">
               $!settingsManager.globalSettings.customHtmlSettings.afterBodyStart
               #displayGlobalMessages()
            </div>
         </div>
         #parse("/decorators/includes/common-header.vm")
<script type="text/javascript">
//Append version dropdown
$(window).load(function(){
$("quick-nav-drop-down a.recently-viewed").hover(function(){
$('a.recently-viewed span').css('color','#ffffff');
});
});

 jQuery(document).ready(function(){

if($('.aui-header-primary ul.aui-nav').length>0)
{
$('.aui-header-primary ul.aui-nav').prepend($('#myselect-style'));
}
else
{
//for logged out users
($('#myselect-style')).insertAfter($('h1.aui-header-logo'));
$('.aui-header-inner').css('display','inline');
$('.aui-header-primary').css('float','left');
}
$('#title-heading').remove();
});
</script>


         #if($sitemeshPage.getProperty("page.tree"))
         #set($sidebarSettings = $studioSidebarHelper.getSettings($spaceKey))
         <div id="splitter" >
            <div id="splitter-sidebar">
            </div>
            <div id="splitter-content">
               ## script needs to be executed here to prevent jerky content
               #includePluginJavascript("com.atlassian.confluence.plugins.doctheme:resources", "doc-theme.js")
               #if ($!sitemeshPage.getProperty("page.theme-header"))
               $!sitemeshPage.getProperty("page.theme-header")
               #end
               #elseif ($useNewSpaceIA && $sitemeshPage.getProperty("page.ia-sidebar"))

                <div class="myDocContent">

                  #end
                  <!-- \#header -->
                  ## CONTENT DIV BEGINS
                  #set ($showPersonalSidebar = ($sitemeshPage.getProperty("page.personal-sidebar") || $sitemeshPage.getProperty("page.show-personal-sidebar")))
                  #if($showPersonalSidebar && !$useNewSpaceIA)
                  #set ($personalClass = "has-personal-sidebar")
                  #elseif($sitemeshPage.getProperty("page.sidebar"))
                  #set ($personalClass = "has-sidebar")
                  #elseif($sitemeshPage.getProperty("page.blog-sidebar") && !$useNewSpaceIA)
                  #set ($personalClass = "has-blog-sidebar")
                  #end
                  #if ($sitemeshPage.getProperty("page.show-main-container") != "false")
                  <div class="ia-splitter" style="width:100% !important; max-width:100% !important;">
                  <div id="main" class="$!personalClass aui-page-panel">
                     #if ($sitemeshPage.getProperty("page.show-main-header") != "false")
                     <div id="main-header" style="width:0 !important;">
                        $!sitemeshPage.getProperty("page.content-navigation")
                        $!sitemeshPage.getProperty("global.dashboard-navigation")
                        <div id="title-heading" class="pagetitle with-breadcrumbs">
                           #if ($sitemeshPage.getProperty("page.username"))
                           #set ($tildeUsername = "~$username")
                           #logoBlock($tildeUsername)
                           #end
                           #if (!$req.requestURL.toString().endsWith('dashboard.action'))
                           <div id="breadcrumb-section">
                              $!sitemeshPage.getProperty("page.breadcrumbs")
                           </div>
                           #end
                           $!sitemeshPage.getProperty("page.page-metadata-banner")
                           <h1 id="title-text" class="with-breadcrumbs">
                              #if ($user)
                              #else
                              #end
                           </h1>
                         </div><!-- \#title-text -->
                           #if (!$req.requestURL.toString().endsWith('dashboard.action') )
                           #set ( $spaceLabel = $page_title)
                      </div><!-- \#main-header -->
                     #end
                     #end
                     <!-- \#Macro check duplicates in Child -->
                     #set($exists = false)
                     #macro(checkAncestors $pageList $ancestors $spaceKey)
                     #foreach($parent in $ancestors)
                     #if($parent != $spaceKey.getHomePage())
                     #foreach($page in $pageList)
                     #if($parent.getContentId().asLong() == $page.getContentId().asLong())
                     #set($exists = true)
                     #break
                     #end
                     #end
                     #end
                     #end
                     #end
                     <!-- \#Macro check duplicates in Child -->
                     <!--\#Macro to restrict display of private spaces for non-logged in users -->
                     #set($isAnonymous = false)
                     #macro(checkAnonymousPermission $space)
                     #foreach ($permission in $space.getPermissions())
                     #if(($permission.getType()  == 'VIEWSPACE') && ($permission.isAnonymousPermission()) )
                     #set($isAnonymous = true)
                     #else
                     #if($user)
                     #set($isAnonymous = true)
                     #end
                     #end
                     #end
                     #end
                     <!-- \#Macro checks, if no child then it will display parent page in Tree pane -->
                     #if($sitemeshPage.getProperty("page.pageId") == $s.getHomePage().getContentId().asLong())
                     #if($pageManager.getPages($s,false).size() == 1 )
                     #if ($s.getName().indexOf(".") > 0 )
                     #set($index = $s.getName().indexOf(".")+1)
                     <li>
                        <a href=$s.getHomePage().getUrlPath() class="active"><span>$s.getName().substring($index)</span></a>
                        #else
                        <a href=$s.getHomePage().getUrlPath()>$s.getName() </a>
                        #end
                        #end
                        #end




                        <!-- Updated by DDR-01JUL15 : START -->

                           <div id="right-main-container">
                              <div id='main-right-menu'>
                                 #set( $currentSpaceKey = $sitemeshPage.getProperty("page.spacekey") )
                                 #set($currentSpace = $spaceManager.getSpace($currentSpaceKey))

                                 #set($apiSpace = $spaceManager.getSpace("40API"))

                                 #set($cliSpace = $spaceManager.getSpace("CLI"))

                                 #set($homeSpace = $spaceManager.getSpace("HOME"))

                                 #set($latestSpace = $spaceManager.getSpace("CCD48"))

                                 #set($mySpaces = [$apiSpace, $cliSpace] )

                                #if($currentSpaceKey == "HOME")
                                    #set($s = $latestSpace)
                                #else
                                    #set($s = $currentSpace)
                                #end
                                  #if($currentSpaceKey == "OP")
                                  #else
                               <script type="text/javascript">

/*Varsha Avoid scrolling div when right main container reaches extreme bottom or top- Kedar's suggestion*/
jQuery(document).ready(function(){
console.log("in function");
 $( '#main-right-menu' ).on( 'mousewheel DOMMouseScroll', function ( e ) {
    var e0 = e.originalEvent,
        delta = e0.wheelDelta || -e0.detail;
    this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
    e.preventDefault();
});
});


 $(window).bind("load", function() {
document.getElementById("headerSelection").style.display='block';
$(".ajs-button.normal #watch-content-button span").text("Watch");
console.log("Watch Content changed");
});
</script>
                                                                   #end

                                 #foreach( $page in $s.getHomePage().getSortedChildren() )
                                 <ul>

                                    #if($!sitemeshPage.getProperty("page.pageId") == $page.getContentId().asLong())

                                      <li class='has-sub top open'>
                                         <a href=$page.getUrlPath() class="current"><span>$page.getTitle()</span></a>

                                    #else

                                      <li class='
                                      #if($page.hasChildren())
                                      has-sub
                                      #else
                                      #end
                                      top'>
                                         <a href=$page.getUrlPath()><span>$page.getTitle()</span></a>

                                    #end

                                      #if($page.hasChildren())
                                      <ul>
                                        #foreach( $cp in $page.getSortedChildren()  )

                                          #if($!sitemeshPage.getProperty("page.pageId") == $cp.getContentId().asLong())
                                            #if($cp.hasChildren())
                                              <li class="has-sub open">
                                                <span class='has-sub'><a class="close-expand-icon"></a></span>
                                            #else
                                              <li>
                                            #end
                                             <a href=$cp.getUrlPath() class="current"><span>$cp.getTitle() </span></a>
                                          #else
                                            #if($cp.hasChildren())
                                              <li class="has-sub">
                                                <span class='has-sub'><a class="close-expand-icon"></a></span>
                                            #else
                                              <li>
                                            #end
                                             <a href=$cp.getUrlPath()><span> $cp.getTitle()</span></a>
                                          #end
                                             #if($cp.hasChildren())
                                             <ul>
                                              #foreach( $ccp in $cp.getSortedChildren()  )
                                                #if($!sitemeshPage.getProperty("page.pageId") == $ccp.getContentId().asLong())
  						                                  <li>
                                                   <a href=$ccp.getUrlPath() class="current"><span>$ccp.getTitle() </span></a>
                                                #else
  						                                  <li>
                                                   <a href=$ccp.getUrlPath()><span>$ccp.getTitle() </span></a>
                                                #end
                                                </li>
                                              #end
                                             </ul>
                                             #end

                                          #end <!--end of each-->
                                       </ul>
                                       #else <!-- else of if children -->

                                       #end <!-- end of if children -->
                                    </li>

                                 </ul>
                                 #end <!--end of each-->
                                 #if(($currentSpaceKey == "OP") || ($currentSpaceKey == "FAQ") || ($currentSpaceKey == "40API") || ($currentSpaceKey == "CLI"))
                                 #else
                                 #foreach( $s in $mySpaces )
                                 <ul>
                                    #if($!sitemeshPage.getProperty("page.spacekey") == $s.getKey())
                                      #if ($s.getName().indexOf(".") > 0 )
                                      #set($index = $s.getName().indexOf(".")+1)
                                      <li class='has-sub top open'><a href=$s.getHomePage().getUrlPath() class="current"><span>$s.getName().substring($index)</span></a>
                                         #else
                                      <li class='has-sub top open'>
                                         <a href=$s.getHomePage().getUrlPath() class="current"><span>$s.getName()</span></a>
                                         #end
                                    #else
                                      #if ($s.getName().indexOf(".") > 0 )
                                      #set($index = $s.getName().indexOf(".")+1)
                                      <li id=$s.getName().substring($index) class='has-sub top'><a href=$s.getHomePage().getUrlPath()><span>$s.getName().substring($index)</span></a>
                                         #else
                                      <li  id=$s.getName() class='has-sub top'>
                                         <a href=$s.getHomePage().getUrlPath()><span>$s.getName()</span></a>
                                         #end
                                    #end

                                  <ul>

                                          #foreach( $page in $s.getHomePage().getSortedChildren() )
                                          #set($exists = false)
                                          #set($isExists = "#checkAncestors($pageManager.getPages($s,true) $page.getAncestors() $s)")
                                          #if(!$exists)
                                          #if($!sitemeshPage.getProperty("page.pageId") == $page.getContentId().asLong())
                                            #if($page.hasChildren())
                                              <li class="has-sub open">
                                                <span class='has-sub'><a class="close-expand-icon"></a></span>
                                            #else
                                              <li>
                                            #end
                                             <a href=$page.getUrlPath() class="current"><span>$page.getTitle() </span></a>
                                          #else
                                            #if($page.hasChildren())
                                              <li class="has-sub">
                                                <span class='has-sub'><a class="close-expand-icon"></a></span>
                                            #else
                                              <li>
                                            #end
                                             <a href=$page.getUrlPath()><span> $page.getTitle()</span></a>
                                          #end
                                             #if($page.hasChildren())
                                             <ul>
                                              #foreach( $cp in $page.getSortedChildren()  )
                                                #if($!sitemeshPage.getProperty("page.pageId") == $cp.getContentId().asLong())
  						                                  <li>
                                                   <a href=$cp.getUrlPath() class="current"><span>$cp.getTitle() </span></a>
                                                #else
  						                                  <li>
                                                   <a href=$cp.getUrlPath()><span>$cp.getTitle() </span></a>
                                                #end
                                                </li>
                                              #end
                                             </ul>
                                             #end
                                             #end
                                             #end
                                       </ul>
                                    </li>
                                 </ul>
                                 #end
                                 #end
                              </div>
                           </div>

                        <!-- Updated by DDR-01JUL15 : END -->
                        $!sitemeshPage.getProperty("page.tab-navigation")
                        #if(($req.requestURL.toString().contains('/display/')) || ($req.requestURL.toString().endsWith('viewpage.action')))
                        <div id="sidebar-container" style="display:none;">
                           <div class="scroll">

                              #if($sitemeshPage.getProperty("page.spacekey"))
                              <div id="accmenu">
                                 <ul>
                                    #foreach( $s in $spaceManager.getAllSpaces() )
                                    <!-- \#Macro checks, if no child then it will display parent page in Tree pane -->
                                    #if($sitemeshPage.getProperty("page.pageId") == $s.getHomePage().getContentId().asLong())
                                    #if($pageManager.getPages($s,false).size() == 1 )
                                    #if ($s.getName().indexOf(".") > 0 )
                                    #set($index = $s.getName().indexOf(".")+1)
                                    <li><a href=$s.getHomePage().getUrlPath() class="active"><span>$s.getName().substring($index)</span></a>
                                       #else
                                       <a href=$s.getHomePage().getUrlPath()>$s.getName() </a>
                                       #end
                                       #end
                                       #end
                                       #if($!sitemeshPage.getProperty("page.spacekey") == $s.getKey())
                                       #foreach( $page in $s.getHomePage().getSortedChildren() )
                                       #if($s.getHomePage().getContentId().asLong() != $page.getContentId().asLong())
                                       #set($exists = false)
                                       #set($isExists = "#checkAncestors($pageManager.getPages($s,true) $page.getAncestors() $s)")
                                       #if(!$exists)
                                       #if($!sitemeshPage.getProperty("page.pageId") == $page.getContentId().asLong())
                                    <li><a href=$page.getUrlPath() class="active"><span>$page.getTitle() </span></a>
                                       #else
                                    <li>
                                       <a href=$page.getUrlPath()><span> $page.getTitle()</span></a>
                                       #end
                                       #if($page.hasChildren())
                                       <span class="has-sub"></span>
                                       <ul>
                                          #foreach( $cp in $page.getSortedChildren()  )
                                          #if($!sitemeshPage.getProperty("page.pageId") == $cp.getContentId().asLong())
                                          <li><a href=$cp.getUrlPath() class="active current-level1"><span>$cp.getTitle() </span></a>
                                             #else
                                          <li>
                                             <a href=$cp.getUrlPath()><span>$cp.getTitle() </span></a>
                                             #end
                                             #if($cp.hasChildren())
                                             <span class="has-sub" style="list-style:none !important;"></span>
                                             <ul>
                                                #foreach( $scp in $cp.getSortedChildren()  )
                                                #if($!sitemeshPage.getProperty("page.pageId") == $scp.getContentId().asLong())
                                                <li><a href=$scp.getUrlPath() class="active current-level2"><span>$scp.getTitle() </span></a>
                                                   #else
                                                <li><a href=$scp.getUrlPath()><span>$scp.getTitle() </span></a></li>
                                                #end
                                                #end
                                             </ul>
                                             #end
                                          </li>
                                          #end
                                       </ul>
                                       #end
                                    </li>
                                    #end
                                    #end
                                    #end
                                    #end
                                    #end
                                 </ul>
                              </div>
                              #end
                           </div>
                        </div>
                        <!-- \#sidebar-container -->
                        #end
                        $body
                  </div>
                  <!-- \#main -->
                  #else
                  $body
                  #end
                  ## CONTENT DIV ENDS
                  #if($sitemeshPage.getProperty("page.tree"))
                  $!sitemeshPage.getProperty("page.theme-footer")
                </div>
              </div>
            </div>
            #end
            #set ($footerContext = {'spaceKey': $!spaceKey})
            #webPanelForLocation("atl.footer" $footerContext)
            #if ($useNewSpaceIA && $sitemeshPage.getProperty("page.ia-sidebar"))
         </div>
         #end
      </div>
      <!-- \#full-height-container -->
   </div>
   <!-- \#page -->
<!--This ul is written by Varsha for moving right container dropdown to the header-->
     <ul style="display:none" >
                                          <li id="myselect-style" class="dpdwn"  style="list-style:none;display:inline; width:60%;" >
                                             <div class="myselect" id="headerSelection" style="width:60%;text-transform:capitalize;font-size:20px;font-family:Lato;">CloudCenter Documentation
                                              <select id="mySelection" style="font-size:20px;font-family:Lato;" onchange="location = this.options[this.selectedIndex].value; ">
<option value="http://docs.cloudcenter.cisco.com/display/CCD48"
 selected="selected"
>v4.8</option>
                                                <option value="http://docs.cloudcenter.cisco.com/display/CCD46/"
                                                #if($currentSpaceKey == "CCD46")
                                                 selected="selected"
                                                #end
                                                >v4.6/4.7</option>
                                                <option value="http://docs.cloudcenter.cisco.com/display/CCD42/"
                                                #if($currentSpaceKey == "CCD42")
                                                 selected="selected"
                                                #end
                                                >v4.2 to 4.5</option>
<option value="http://docs.cloudcenter.cisco.com/display/40API/"
                                                #if($currentSpaceKey == "40API")
                                                 selected="selected"
                                                #end
                                                >API</option>
                                              </select>
                                            </div>
                                          </li>
                                      </ul>


   <ul>
       <li class="dpdwn" id="append_menu" style="display:none;">
          <a href="#"><span>Spaces</span></a>
          <ul>
             <strong>Recent spaces</strong>
             #foreach( $s in $spaceManager.getAllSpaces() )
             #if ($s.getName().indexOf(".") > 0 )
             #set($index = $s.getName().indexOf(".")+1)
             <li><a href="$s.getHomePage().getUrlPath()">$s.getName().substring($index) </a></li>
             #else
             <a href=$s.getHomePage().getUrlPath()>$s.getName()  $permission.getType() </a>
             #end
             #end
             <li><a style="border-top: 1px solid #CCC;" href="/spacedirectory/view.action?src=spacemenu">Space directory</a></li>
             <li><a href="/spaces/createspace-start.action?src=spacemenu">Create space</a></li>
          </ul>
       </li>
   </ul>
   <script>
   jQuery( "#mobile-hamburger" ).toggle(
     function() {
        jQuery("#side-menu").addClass("side_menu");
    jQuery(this).addClass("mobile_hamburger");
     }, function() {
       jQuery("#side-menu").removeClass("side_menu");
    jQuery(this).removeClass("mobile_hamburger");
     }
   );
</script>
<!-- \#Remove Tools Menu for not logged in users -->
#if (!$user)
<script>
   $(document).ready(function(){

$(".aui-header-primary").css("width",'70%');
$("#myselect-style").css("width",'90%');
$(".myselect").css("padding-top",'5px');


   $("#action-menu-modify").remove();
   $("#action-menu-primary").remove();
   $("#view-page-info-link").parent().remove();
   $("#link-to-page-link").parent().remove();
   $("#view-in-hierarchy-link").parent().remove();
   $("#action-view-source-link").parent().remove();
   $("#import-word-doc").parent().remove();
   });
</script>
#end
<script type="text/javascript">

var ww = document.body.clientWidth;

jQuery(document).ready(function() {

//Added by Varsha to Remove share option
$("#shareContentLink").parent().remove();


//Added by Varsha for removing the search tool bar from landing page
$(".confluence-searchbox.adaptavist-searchbox.marginlessForm").parent().parent().remove();


//Added by Varsha to replace FAB icons by glyphicons. Also involved code to remove underline

$("#page-favourite").remove();


$("#editPageLink").removeClass();
$("#editPageLink").addClass("glyphicon glyphicon-pencil");
$("#editPageLink").css("text-decoration","none");
$("#editPageLink").css("display","-webkit-box");
$("#editPageLink").parent().css("width","auto");
$("#editPageLink").parent().css("height","inherit");
$("#editPageLink span").text("Edit");
$("#editPageLink").css("padding","3px");



$("#watch-content-button").removeClass();
$(".ajs-button.normal #watch-content-button span").remove();
$(".ajs-button.normal #watch-content-button").prepend("<span></span>");
$(".ajs-button.normal #watch-content-button span").text("Watch");

$("#watch-content-button").addClass("glyphicon glyphicon-eye-open");
$("#watch-content-button").css("text-decoration","none");
$("#watch-content-button").css("display","-webkit-box");
$("#watch-content-button").parent().css("width","auto");
$("#watch-content-button").parent().css("height","inherit");
$("#watch-content-button").css("padding","3px");
$("#watch-content-button span").attr("style","padding-left: 14px !important");


$("#action-menu-link").removeClass();
$("#action-menu-link").addClass("aui-dropdown2-trigger glyphicon glyphicon-cog");
$("#action-menu-link").css("text-decoration","none");
$("#action-menu-link").css("display","-webkit-box");
$("#action-menu-link").parent().css("width","auto");
$("#action-menu-link span").text("Tools");
$("#action-menu-link").css("padding","3px");
//$("#action-menu-link span").css("padding-left","5px");
$("#action-menu-link span").css("font-family","sans-serif");


//end of glyphicons


//Added by Varsha for changing the settings icon
$(".aui-nav-link.aui-dropdown2-trigger").prepend("<span class='aui-icon aui-icon-small aui-iconfont-confluence'/>");
$("span.aui-icon.aui-icon-small.aui-iconfont-configure").remove();
$(".aui-avatar-inner").prepend("<span class='glyphicon glyphicon-user'></span>")
$(".aui-avatar-inner img").remove();

//Added by Varsha for selective version display of CLI

var myselect=document.getElementById("mySelection");
var selectedText=myselect.options[myselect.selectedIndex].text;
if(selectedText=="v4.8" || selectedText=="v4.6/4.7")
{
//Hide the CLI
$("#CLI").hide();
console.log("Cli hidden");
}
    var hideMenu = $('#search-results-header').length +
                   $('#space-directory').length +
                   $('.space-operations').length +
                   $('#content.space').length +
                   $('#content.view-attachments').length +
                   $('#content.view-information').length;

    if(hideMenu > 0) {
      $('#right-main-container').hide();
    }





//Varsha Make search space oriented as per Kedars suggestion
$('#quick-search').submit(function(eventObj) {

if("$currentSpaceKey"){
var val="$currentSpaceKey";
console.log("the current space key is "+val);

//check if the URL contains "where parameter"
 var results = new RegExp('[\?&]' + "where" + '=([^&#]*)').exec(window.location.href);
  if(results!=null){
       val=decodeURI(results[1]) || 0;
       console.log("Inside the URL check function "+val);
    }

console.log("outside check "+val);

if(val=="HOME")
val="CCD48";
    $(this).append('<input type="hidden" name="where" value="'+val+'" /> ');
    return true;
	}
});


$(".pagination-container").append("<a href='display ' class='home-back-btn'>Back To Home</a>" );

//$( ".search-results" ).append( "<a href='display ' class='home-back-btn'>Back To Home</a>" );


/*This is the page to append search component by Varsha*/
$("div.aui-page-panel-inner").prepend($("#search-form"));
$("#search-results-header").remove();
$("div.aui-page-panel-inner").css("margin","auto");
$("div.aui-page-panel-inner").css("margin-top","25px");
$("div.aui-page-panel-inner").css("background-color","#f8f8f8");
$("div.aui-page-panel-inner").css("font-style","Lato");


$("div.aui-page-panel-inner").css("width","60%");
$("div.aui-page-panel-inner").css("padding","20px 20px 20px 20px");





    /* First Level Active Menu Open*/
    //Active parent menu down arrow
    $(".current-level1").parent().parent().parent().find(".has-sub").addClass("active");
    $(".current-level1").parent().parent().css("display","block");

    /* Second Level Active Menu Open*/
    $(".current-level2").parent().parent().css("display","block");
    $(".current-level2").parent().parent().parent().parent().css("display","block");
    //Active parent menu down arrow
    $(".current-level2").parent().parent().parent().parent().parent().find(".has-sub").addClass("active");

    // is mobile device
    if ($('header').width() > 480){

        var window_h = $(window).height();
        var document_h = $(document).height();
        var topbar_h = $("#header").height();
        var menu_h = $("#main-header").height();
        var top_h = (topbar_h + menu_h)+50;
        var left_height = document_h - top_h;
        var leftmenu_height = window_h - top_h;
        $("#accmenu").css("height",left_height);


        var widow_width = $(window).width();
        var left_menu_width = $(".scroll").width();
        var left_width = left_menu_width + 130;
        var right_width = (widow_width - left_width);
        $(".innercell").css("width",right_width);

    }

    var window_h = $(window).height();
    var pan_height = window_h - 20;
    $(".scroll-pane").css("height",pan_height);

    $( window ).resize(function() {
        var window_h = $(window).height();
        var pan_height = window_h - 20;
        $(".scroll-pane").css("height",pan_height);
        var widow_width = $(window).width();
        var left_menu_width = $(".scroll").width();
        var left_width = left_menu_width + 130;
        var right_width = (widow_width - left_width);
        $(".innercell").css("width",right_width);
    });
    $( ".scroll" ).resize(function() {
        var widow_width = $(window).width();
        var left_menu_width = $(".scroll").width();
        var left_width = left_menu_width + 130;
        var right_width = (widow_width - left_width);
        $(".innercell").css("width",right_width);
    });
    jQuery(".nav li.has-sub").mouseover(function() {
        jQuery(this).addClass("down-arrow");
    });
    jQuery(".nav li.has-sub").mouseout(function() {
        jQuery(this).removeClass("down-arrow");
    });
    jQuery(".nav li a").each(function() {
        if (jQuery(this).next().length > 0) {
            jQuery(this).addClass("parent");
        };
    })

    jQuery(".toggleMenu").click(function(e) {
        e.preventDefault();
        jQuery(this).toggleClass("down-arrow");
        jQuery(".nav").toggle();
    });
    adjustMenu();
});

jQuery(window).bind('resize orientationchange', function() {
    ww = document.body.clientWidth;
    adjustMenu();
});

var adjustMenu = function() {
    if (ww < 768) {
        jQuery(".toggleMenu").css("display", "inline-block");
        if (!jQuery(".toggleMenu").hasClass("down-arrow")) {
            jQuery(".nav").hide();
        } else {
            jQuery(".nav").show();
        }
        jQuery(".nav li").unbind('mouseenter mouseleave');
        jQuery(".nav li a.parent").unbind('click').bind('click', function(e) {
            // must be attached to anchor element to prevent bubbling
            e.preventDefault();
            jQuery(this).parent("li").toggleClass("hover");
        });
    }
    else if (ww >= 768) {
        jQuery(".toggleMenu").css("display", "none");
        jQuery(".nav").show();
        jQuery(".nav li").removeClass("hover");
        jQuery(".nav li a").unbind('click');
        jQuery(".nav li").unbind('mouseenter mouseleave').bind('mouseenter mouseleave', function() {
            // must be attached to li so that mouseleave is not triggered when hover over submenu
            jQuery(this).toggleClass('hover');
        });
    }
}
</script>
<script type="text/javascript">
   ( function( jQuery ) {
   jQuery( document ).ready(function() {

   jQuery('#accmenu > ul > li > span').click(function() {
     jQuery('#accmenu li').removeClass('active');
     jQuery(this).closest('li').addClass('active');
     jQuery(this).addClass('active');
     var checkElement = jQuery(this).next();
     if((checkElement.is('ul')) && (checkElement.is(':visible'))) {
       jQuery(this).closest('li').removeClass('active');
       jQuery(this).removeClass('active');
       checkElement.slideUp('normal');
     }
     if((checkElement.is('ul')) && (!checkElement.is(':visible'))) {
      // jQuery('#accmenu ul ul:visible').slideUp('normal');
       checkElement.slideDown('normal');
     }
     if(jQuery(this).closest('li').find('ul').children().length == 0) {
       return true;
     } else {
       return false;
     }
   });
   jQuery('#accmenu > ul > li > ul > li > span').click(function() {
     jQuery(this).closest('li').addClass('active');
     jQuery(this).addClass('active');
     var checkElement = jQuery(this).next();
     if((checkElement.is('ul')) && (checkElement.is(':visible'))) {
       jQuery(this).closest('li').removeClass('active');
       jQuery(this).removeClass('active');
       checkElement.slideUp('normal');
     }
     if((checkElement.is('ul')) && (!checkElement.is(':visible'))) {
      // jQuery('#accmenu ul ul ul:visible').slideUp('normal');
   	jQuery('#accmenu ul ul li.active').removeClass('active');
       checkElement.slideDown('normal');
   	jQuery(this).closest('li').addClass('active');
     }
     if(jQuery(this).closest('li').find('ul').children().length == 0) {
       return true;
     } else {
       return false;
     }
   });
   });
   } )( jQuery );





   /******** Accordion Script added by DDR for Side According Menu  START ******/
   ( function( $ ) {
           $( document ).ready(function() {

              if($('#login-link').length>0){
                     $('#navigation').css('display','none');
                     $('#main').css('padding-top','0px');
//changed by Varsha for the login appearing on the home page
$("#login-link").empty();
$("#login-link").addClass("glyphicon glyphicon-user");
$("#login-link").css("color","#ffffff");

              }

              $('#main-right-menu li.has-sub>a').on('click', function(e){
                   var findCurrent = $(this).parent().find('.current');
                   var element = $(this).parent('li');
                   var elementPlus = $(this).prev('span');
                   var menuBar = $('#main-right-menu');

                   if ($(this).hasClass('current') || findCurrent.hasClass('current') || element.hasClass('has-sub')) {

                     e.preventDefault();

                     if (element.hasClass('open')) {
                         element.removeClass('open');
                         element.find('li').removeClass('open');
                         element.find('span').removeClass('open');
                         element.find('ul').slideUp();
                         elementPlus.removeClass('open');
                     }
                     else {
                         //$("#main-right-menu>ul>li.open>ul").slideUp();
                         //$("#main-right-menu>ul>li.open").removeClass('open');

                         element.addClass('open');
                         element.children('ul').slideDown();
                         //element.siblings('li').children('ul').slideUp();
                         //element.siblings('li').removeClass('open');
                         //element.siblings('li').find('li').removeClass('open');
                         element.siblings('li').find('span').removeClass('open');
                         elementPlus.addClass('open');
                         element.siblings('li').find('ul').slideUp();
                         element.parent().siblings('ul').find('.top.open > a').trigger( "click" );
                     }

                   }
               });

              $('#main-right-menu ul>li>span.has-sub>a').on('click', function(){
                  $(this).removeAttr('href');
                  var element = $(this).parent().parent('li');
                  var element_s = $(this).parent('span');
                  var element_s_ul = element.parent('ul');
                  var element_s_li = element_s.parent('li');
                  var element_s_li_prev = element_s_li.prev();
                  var menuBar = $('#main-right-menu');

                  if(element_s_li_prev.length !== 0 && element_s_li_prev.position().top < 0) {
                    menuBar.scrollTop(200);
                  }

                  if (element_s.hasClass('open')) {
                      element.removeClass('open');
                      element_s.removeClass('open');
                      element_s_ul.find('li').removeClass('open');
                      element.find('ul').slideUp();
                      element.find('span.open').removeClass('open');
                      element.find('.has-sub.open').removeClass('open');
                  }
                  else {
                      element_s.addClass('open');
                      element.children('ul').slideDown();
                      element.siblings('li').children('ul').slideUp();
                      element.siblings('span').removeClass('open');
                      element.siblings('li').find('span').removeClass('open');
                      element.siblings('li').find('ul').slideUp();
                      element_s_li.parent('ul').find('li').removeClass('open');
                      element.addClass('open');
                  }
              });

              var window_height = $(window).height();
              var offset_top = $('#right-main-container').offset().top;
              var footer_height = $('#footer').height();
              var other_height = offset_top + footer_height+10;
              var main_area_height = window_height - other_height;
              var main = main_area_height + 65;
              var search_area_height = main_area_height - 72;
              if(main_area_height > 200){
                  //$('#main-right-menu').css('max-height',main_area_height+'px');
                  // $('#main-content-container').css('max-height',main_area_height+'px');
                  // $('.aui-page-panel-inner').css('max-height',search_area_height+'px');

                  //$('#main').css('height',main+'px');
              } else {
                  //$('#main-right-menu').css('height','200px');
                  //$('#main-content-container').css('height','200px');
              }

              $(window).scroll(function() {
                if($('#main-right-menu').hasClass('atBottom')) {
                  $('#main-right-menu').removeClass('atBottom');
                }
                if($(window).scrollTop() + $(window).height() == $(document).height()) {
                   $('#main-right-menu').addClass('atBottom');
                 }
              });

            $("#main-right-menu .current").parent('li').parent('ul').parent('li').children('.has-sub').addClass('open');
            $("#main-right-menu .open").parent('li').parent('ul').css('display','block');
            $("#main-right-menu .current").parent('li').parent('ul').parent('li').parent('ul').parent('li').children('.has-sub').addClass('open');
            $("#main-right-menu .current").parent('li').parent('ul').parent('li').parent('ul').parent('li').parent('ul').css('display','block');
            $("#main-right-menu .current").parent('li').parent('ul').parent('li').parent('ul').parent('li').parent('ul').parent('li').addClass('open');
            $("#main-right-menu .current").parent('li').parent('ul').parent('li').parent('ul').parent('li').addClass('open');

            $("#main-right-menu .current").parent('li').parent('ul').css('display','block');
            $("#main-right-menu .current").parent('li').parent('ul').parent('li').addClass('open');

            $("#main-right-menu .current").next('ul').css('display', 'block');
            $("#main-right-menu .current").prev('span.has-sub').addClass('open');
           });

           $('a[href*=#]:not([href=#])').click(function() {
             if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') && location.hostname == this.hostname) {
               var target = $(this.hash);
               target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
               if (target.length) {
                 $('html,body').animate({
                   scrollTop: target.offset().top - 50
                 }, 1000);
                 return false;
               }
             }
           });
           if (location.hash) {
               var target = $(location.hash);
               $('html,body').animate({
                   scrollTop: target.offset().top - 70
                 }, 1000);
               return false;
           }

           $(".select-style select").each(function () {
              $(this).val($(this).find('option[selected]').val());
           });


//Added by Varsha for getting current element and finding its offset from top
$(window).bind("load", function() {
var mycurrent=$("li a.current");
var divright=$("#main-right-menu");
if(mycurrent.length>0)
{
$('#main-right-menu').animate({
   scrollTop: mycurrent.offset().top-divright.offset().top},
   1);
}
});
    } )( jQuery );
   /******** Accordion Script added by DDR for Side According Menu  END******/
</script>
<script>
   jQuery(".has-sub").parent().css("list-style","none");
</script>
<script>

   jQuery(document).ready(function() {
   $(".scroll").resizable();
   });
</script>
<script type="text/javascript">
//Append spaces
var append_menu = $('#append_menu').html();
 $(".aui-header-primary ul.aui-nav").prepend("<li class='dpdwn'>"+append_menu+"</li>");

//Append version dropdown
 jQuery(document).ready(function(){
 //By Jason $(".aui-header-primary").prepend("<ul class='aui-nav'><li class='dpdwn'>"+myselect+"</li></ul>");
 $('.aui-header-primary ul.aui-nav').prepend($('#myselect-style'));

console.log("The height of aui header primary is "+$('.aui-header-primary').height());
if($('.aui-header-primary').height()<=0)
{
console.log("No aui header present!!!:(");
($('#myselect-style')).insertAfter($('h1.aui-header-logo'));
//Set the css of header o that both primary and secondary headers are inline
$('.aui-header-inner').css('display','inline');
$('.aui-header-primary').css('float','left');

}

});
</script>
<script type="text/javascript">
   $( ".login-section:contains('Log in')" ).css( "margin-left", "70px" );

/*get space from the url and select index for the verison dropdown menu*/
 $(window).bind("load", function() {

//By Varsha for customizing search Page
if($("div.search-results-page-panel-nav").length>0){
/*This is where we place search css results*/
/*Step 1: remove all unwanted fields */
$("#s2id_cql-field-contributor-0").hide();
$(".cql-filter-field-input-container span").hide();
$(".cql-filter.cql-field-lastmodified.cql-type-date").hide();
$(".cql-filter.cql-field-type.cql-type-contentType").hide();
$(".cql-add-filter-container").hide();

/*Step 2 Position AUI page panel Inner*/
$("div.aui-page-panel-inner").css("position","absolute");
$("div.aui-page-panel-inner").css("margin-top","60px");
$(".aui-page-panel").css("border","none");
$(".aui-page-panel-inner").css("background-color","#ffffff");
$(".aui-page-panel-inner").css("width","1200px");
$(".aui-page-panel-inner").css("font-family","Lato");


/*Step 3 position the version and search input box inline*/
$("#search-query-submit-button").attr("style","border:1px solid #c6c7ca !important");
$(".loading-spinner.button-spinner").hide();
$(".search-results-page-panel-nav").css("padding-top","44px");
$("#search-form").css("width","50%");
$("#search-form").css("float","left");

/*Customize css of elements*/
$("#search-form h1").css("font-weight","300");
$("#search-query-submit-button").css("position","absolute");
$("#search-query-submit-button").css("margin-left","0");
console.log("Removed");
$(".aui-icon.aui-icon-small.aui-iconfont-help.help-button").remove();
}
else
{
console.log("Not Removed");
}




var hash;
    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
    for(var i = 0; i < hashes.length; i++)
    {
        hash = hashes[i].split('=');
if(hash[0]=="where")
{
console.log("found where");
//Based on the where parameter,  select the corresponding option in myselect select dropdown
var whereVal=hash[1];
if(whereVal=="CCD48")
{
console.log("found 48");
$("#mySelection").prop("selectedIndex" ,0);
}
else if(whereVal=="CCD46")
{
console.log("found 46");
$("#mySelection").prop("selectedIndex" ,1);}
else if(whereVal=="CCD42")
{
console.log("found 42");
$("#mySelection").prop("selectedIndex" ,2);}
break;
}
    }
});




//end of window bind onload function
</script>
   </body>
</html>